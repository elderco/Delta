@model VillaBisutti.Delta.Core.Model.Perfil
@{
	Layout = null;
	int i = 0;
}
<script language="javascript" type="text/javascript">
	$(document).ready(function () {
		$(".set-acesso").click(function () {
			var clicado = $(this).attr("id").split("_")[0];
			var acao = $(this).attr("id").split("_")[1];
			$("#" + clicado + "_TOTAL").removeClass("active").removeClass("btn-info").removeClass("btn-success").addClass("btn-info");
			$("#" + clicado + "_LEITURA").removeClass("active").removeClass("btn-info").removeClass("btn-success").addClass("btn-info");
			$("#" + clicado + "_SEM").removeClass("active").removeClass("btn-info").removeClass("btn-success").addClass("btn-info");
			$(this).removeClass("btn-info").addClass("btn-success");
			if (acao == "TOTAL") {
				$("#PodeAlterar_" + clicado).attr("value", "true");
				$("#PodeLer_" + clicado).attr("value", "true");
			} else if (acao == "LEITURA") {
				$("#PodeAlterar_" + clicado).attr("value", "false");
				$("#PodeLer_" + clicado).attr("value", "true");
			} else if (acao == "SEM") {
				$("#PodeAlterar_" + clicado).attr("value", "false");
				$("#PodeLer_" + clicado).attr("value", "false");
			}
		});
	});
</script>
@Scripts.Render("~/bundles/jqueryval")
@using (Html.BeginForm("ItemCreated", "Perfil", new { id = "" }))
{
	@Html.AntiForgeryToken()

	<div class="form-horizontal">
		<h4>Perfil</h4>
		<hr />
		@Html.ValidationSummary(true)
		<div class="form-group">
			@Html.LabelFor(model => model.Nome, htmlAttributes: new { @class = "control-label col-md-2" })
			<div class="col-md-4">
				@Html.EditorFor(model => model.Nome)
				@Html.ValidationMessageFor(model => model.Nome)
			</div>
		</div>
		<div class="form-group">
			@foreach (VillaBisutti.Delta.Core.Model.Modulo item in ViewBag.Modulos)
			{
				<div class="btn-group col-lg-3 col-md-4" data-toggle="buttons">
					<label class="btn btn-info col-xs-8">@item.Nome</label>
					<label class="btn btn-info set-acesso col-xs-1" id="@(item.Id)_TOTAL"><span class="fa fa-pencil" title="Acesso Total"></span></label>
					<label class="btn btn-info set-acesso col-xs-1" id="@(item.Id)_LEITURA"><span class="fa fa-eye" title="Somente Leitura"></span></label>
					<label class="btn btn-success set-acesso active col-xs-1" id="@(item.Id)_SEM"><span class="fa fa-eye-slash" title="Sem Acesso"></span></label>
					<span class="ui-helper-hidden">
						<input type="hidden" name="Modulos[@(i)].ModuloId" value="@(item.Id)" />
						<input value="false" type="hidden" id="PodeAlterar_@(item.Id)" name="Modulos[@(i)].PodeAlterar" />
						<input value="false" type="hidden" id="PodeLer_@(item.Id)" name="Modulos[@(i)].PodeLer" />
					</span>
				</div>
				i = i + 1;
			}
		</div>
		<div class="form-group">
			<div class="col-md-4">
				<input type="submit" value="Salvar" class="btn btn-default form-control" />
			</div>
		</div>
	</div>
}


