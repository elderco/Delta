@model VillaBisutti.Delta.Core.Model.Perfil
@{
	Layout = null;
	int i = 0;
}
<script language="javascript" type="text/javascript">
	$(document).ready(function () {
		$(".set-acesso").click(function () {
			var clicado = $(this).attr("id").split("_")[0];
			var acao = $(this).attr("id").split("_")[1];
			if (acao == "TOTAL") {
				$("#PodeAlterar_" + clicado).attr("value", "true");
				$("#PodeLer_" + clicado).attr("value", "true");
			} else if (acao == "LEITURA") {
				$("#PodeAlterar_" + clicado).attr("value", "false");
				$("#PodeLer_" + clicado).attr("value", "true");
			} else if (acao == "SEM") {
				$("#PodeAlterar_" + clicado).attr("value", "false");
				$("#PodeLer_" + clicado).attr("value", "false");
			}
		});
	});
</script>
@Scripts.Render("~/bundles/jqueryval")
@using (Html.BeginForm("ItemCreated", "Perfil", new { id = "" }))
{
	@Html.AntiForgeryToken()

	<div class="form-horizontal">
		<h4>Perfil</h4>
		<hr />
		@Html.ValidationSummary(true)
		<div class="form-group">
			@Html.LabelFor(model => model.Nome, htmlAttributes: new { @class = "control-label col-md-2" })
			<div class="col-md-4">
				@Html.EditorFor(model => model.Nome)
				@Html.ValidationMessageFor(model => model.Nome)
			</div>
		</div>
		<div class="form-group">
			@foreach (VillaBisutti.Delta.Core.Model.Modulo item in ViewBag.Modulos)
			{
				<ul class="col-md-4 list-group">
					<li class="list-group-item list-group-item-info">
						<span class="ui-helper-hidden">
							<input type="hidden" name="Modulos[@(i)].ModuloId" value="@(item.Id)" />
							<input value="false" type="hidden" id="PodeAlterar_@(item.Id)" name="Modulos[@(i)].PodeAlterar" />
							<input value="false" type="hidden" id="PodeLer_@(item.Id)" name="Modulos[@(i)].PodeLer" />
						</span>
						<h5>@item.Nome</h5>
					</li>
					<li class="list-group-item">
						<label class="col-md-4">
							<input type="radio" class="set-acesso" id="@(item.Id)_TOTAL" name="@item.Id" />Acesso Total
						</label>
						<label class="col-md-4">
							<input type="radio" class="set-acesso" id="@(item.Id)_LEITURA" name="@item.Id" /> Somente Leitura
						</label>
						<label class="col-md-4">
							<input type="radio" class="set-acesso" id="@(item.Id)_SEM" name="@item.Id" checked /> Sem Acesso
						</label>
					</li>
				</ul>
				i = i + 1;
			}
		</div>
		<div class="form-group">
			<div class="col-md-4">
				<input type="submit" value="Salvar" class="btn btn-default form-control" />
			</div>
		</div>
	</div>
}


